# CREATest

## Replication package for the paper "Abstract Test Generation for itemis CREATE Statecharts by Code Transformation", submitted to ICST 2025

This repository contains the replication package for the paper "Abstract Test Generation for itemis CREATE Statecharts by Code Transformation", submitted to ICST 2025. The package contains the following artifacts:

* `CREATest`: folder containing the source code of the CREATest tool.
* `dist`: folder containing the compiled version of the CREATest tool (`CREATest-0.0.2.jar`), together with the needed libraries (e.g., EvoSuite)
* `experiments-model`: folder containing the models used in the evaluation of the paper.
    - `from_itemis`: folder containing the models taken from itemis repository
    - `from_stl4iot`: folder containing the models taken from the STL4IoT repository
    - `from_other_repos`: folder containing the models taken from other repositories
    - `SuiteForCluster[X].sctunit`: test suite for cluster [X] used for the evaluation of the CREATest tool.

## How to use the CREATest tool

### Requirements

The tool has the following requirements:

* A machine with a Windows operating system installed and at least 32MB of
free hard disk space.
* Java Development Kit (JDK) version 1.8 installed on the machine. The
JDK is available for the download at https://www.oracle.com/it/java/technologies/javase/javase8-archive-downloads.html.
* A working Eclipse-based installation of itemis CREATE (both standalone and Eclipse plug-in are supported). The supported versions of itemis CREATE are 5.2.1 or 5.2.2 (the correct functioning of the tool is not guaranteed with different versions of itemis CREATE). itemis CREATE is available under license.
No feature provided by the professional license is required to use the tool, so the standard license is sufficient. The installation of itemis CREATE comes with an evaluation license that is valid for 30 days. Licenses are available at https://www.itemis.com/en/products/itemis-create/licenses/. 
itemis CREATE can be downloaded after filling out the form available at https://info.itemis.com/products/itemis-create/download/.
* A directory named `libs` containing the dependencies as JAR files. The `libs` directory must be located in the same directory of `Createst-0.0.2.jar` and its content is available in the `dist/libs.zip` file available in this replication package. The required dependencies are:
    - ANTLR Runtime version 3.3,
    - Apache Commons CLI version 1.6.0,
    - EvoSuite version 1.0.6,
    - JavaParser Core version 3.25.6,
    - StringTemplate version 4.0.2.

### CLI

The CREATest tool can be used by the user via a command line interface (CLI).
The following options are required:

* `-scc`: the absolute path to the `scc.bat` file contained in the itemis CREATE installation, used for Java code generation from CREATE statecharts.
* `-projectPath`: the absolute path to the Java project containing the input CREATE statechart. It is the base path for the other options.
* `-sourceDir`: the relative path to the directory containing the input CREATE statechart.
* `-sourceFile`: the name of the file without extension where the input CREATE statechart is stored. The extension can be either `.ysc` or `.sct`.
* `-targetPackage`: the package in dot notation where the .java files generated by the tool will be placed.

The following options are optional:

* `-h`, `-help`: print the help message, regardless of other options.
* `-binaryDir`: the relative path to the directory where the binary (`.class`) files will be placed. The default value, which is sufficient for standard Java projects, is `bin`. For example, if the project specified in the `-projectPath` option is a Maven project, the value of this option should be `target\classes`.
* `-targetDir`: the relative path to the directory that will contain the target package. If it is an existing source folder, it cannot have sub-directories. The default value is `src`.
* `-evoTestDir`: the relative path to the directory where the generated JUnit tests will be placed. The default value is `evosuite-tests`.
* `-evoSearchBudget`: the EvoSuite search budget, expressed in seconds. It
must be a positive integer.

If an input option provided by the user is incorrect (e.g. the specified source file does not exist) or one of the required options is missing, a message describing the error is displayed.

#### Usage

Once all the requirements are met, it is possible to use the CREATest tool. The following is a step-by-step guide to using the tool from scratch:

- **Step 1**: Create a new Java project (it can be a standard Java project or any project that supports Java development, including Maven projects) in the itemis CREATE Eclipse-based installation: 
    1. Start itemis CREATE.
    2. Select the workspace and click Launch.
    3. Navigate to `File` -> `New` -> `Project...` -> `Java Project`.
    4. In the `Project name` field, insert the name of the project.
    5. Click on `Finish`.

- **Step 2**: Optionally, create a new source folder for tests:
    1. Right-click on the project created in the previous step.
    2. Navigate to `New` -> `Source Folder`.
    3. In the `Folder name` field, insert the name of the source folder.
    4. Click on `Finish`.

- **Step 3**: Create a new folder for the CREATE statechart:
    1. Right-click on the project created in the first step.
    2. Navigate to `New` -> `Folder`.
    3. In the `Folder name` field, insert the name of the folder.
    4. Click on `Finish`.

- **Step 4**: Create a new CREATE statechart:
    1. Right-click on the folder created in the previous steps.
    2. Navigate to `New` -> `Statechart Model`.
    3. In the `File name` field, insert the name of the statechart (with the `.ysc` extension).
    4. Click on `Next`.
    5. Select *Default Domain*
    6. Click on `Finish`.
    7. If a window asking to switch the perspective appears, click on `Yes`.

- **Step 5**: Edit the CREATE statechart:
    1. Open and Edit the statechart as needed.
    2. Save the statechart.

- **Step 6**: Run the CREATest JAR:
    1. Open a terminal window.
    2. Navigate to the directory containing the `CREATest-0.0.2.jar` file and the `libs` directory.
    3. Run the CREATest JAR with the appropriate options.

- **Step 7**: Analyze the newly created artifacts:
    1. Examine the generated artifacts.
    2. Run the SCTUnit class over the statechart.